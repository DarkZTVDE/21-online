<div class="grid place-items-center min-h-screen p-4">
  <div class="flex gap-2 place-self-start">
    <button
      mat-mini-fab
      color="primary"
      matTooltip="Leave room"
      (click)="game.room!.leave()"
    >
      <mat-icon>logout</mat-icon>
    </button>

    <button
      mat-mini-fab
      color="primary"
      matTooltip="Copy room link to clipboard"
      [cdkCopyToClipboard]="location.href.split('?')[0]"
    >
      <mat-icon>link</mat-icon>
    </button>

    <button
      *ngIf="game.player?.admin"
      mat-mini-fab
      color="primary"
      matTooltip="You are the room's admin"
    >
      <mat-icon>star</mat-icon>
    </button>
  </div>

  <div class="grid place-items-center w-full py-8">
    <div class="player-holder row-start-1 col-start-1">
      <app-player
        [type]="'dealer'"
        [dealerHand]="game.room!.state.dealerHand"
        [scoreBottom]="false"
      ></app-player>

      <app-player
        *ngFor="let player of getAllPlayers(); index as i"
        [style.z-index]="10 - Math.round(getPlayerPosition(i) * 10)"
        [player]="player"
        [scoreBottom]="getPlayerPosition(i) <= 0.25"
      ></app-player>
    </div>

    <div
      class="row-start-1 col-start-1 z-10 text-amber-50 font-serif text-center"
    >
      <span class="table-font">Blackjack pays 3 to 2</span><br />
      <span class="table-font-sm">Dealer must stand on 17</span>
    </div>

    <div
      *ngIf="
        game.room!.state.roundState == 'idle' &&
        game.room!.state.nextRoundStartTimestamp
      "
      class="row-start-1 col-start-1 z-10 table-font px-3 lg:px-4 2xl:px-7 pill-popup"
    >
      Starting round
    </div>
  </div>

  <app-player-actions class="mt-6"></app-player-actions>

  <span class="text-neutral-400 self-end"> Room ID: {{ game.room!.id }} </span>
</div>
